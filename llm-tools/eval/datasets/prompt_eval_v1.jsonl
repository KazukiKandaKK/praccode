{"id":"grader_sample_001","task":"grade_code_reading","question":"このハンドラが400/409/500を返す条件と理由を説明してください。","context":{"language":"ts","text":"const parsed = schema.safeParse(req.body);\nif(!parsed.success){ req.log.info({issues: parsed.error.issues}, 'invalid body'); return reply.code(400).send({error:'invalid body'});\n}\ntry{ const user = await prisma.user.create({data: parsed.data}); return reply.code(201).send({id:user.id}); }\ncatch(e){ if(e.code==='P2002'){ req.log.warn({email: parsed.data.email}, 'duplicate email'); return reply.code(409).send({error:'already exists'});} req.log.error({err:e}, 'db error'); return reply.code(500).send({error:'internal'});}"},"studentAnswer":"400はバリデーション、409は重複、500はDBエラーです。","gold":{"goldPoints":["400はsafeParse失敗時で、issuesをinfoログに出している","409はP2002(一意制約)でduplicate emailをwarnログ","500はその他例外でdb errorをerrorログ","201は作成成功でid返却"],"forbiddenClaims":["429","レート制限","認証エラー401"]},"meta":{"expectedJsonSchema":"grader_v1","tags":["http","error-handling","logging"]}}
